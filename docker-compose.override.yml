# Development config
version: '3'
services:
  web:
    image: cb-flask:dev
    build:
      context: ./web
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    volumes:
      - './web/:/home/app'
    env_file:
      - secrets.list
    # debugger support
    stdin_open: true
    tty: true
  redis:
    image: "redis:alpine"
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:6.1.2
    container_name: elasticsearch
    environment:
      - cluster.name=cb-dev
    ports:
      - 9200:9200
    volumes:
      - './elasticsearch/data:/usr/share/elasticsearch/data'
    depends_on:
      - logstash
      - web


